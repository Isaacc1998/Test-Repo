!function(){var e={374:function(e,t,n){const i=n(320).Z;e.exports=class extends i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("atGunner",11,8,1,3,2),this.name=e,this.owner=t}}},137:function(e){e.exports=BATTLEFIELDS={levelOne:[[0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0],[0,3,3,3,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,3,3,3,0,0],[0,0,0,1,0,0,0,0,0,0],[0,3,3,3,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0,1],[0,0,0,0,0,0,0,0,1,1]],levelTwo:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],background:[[0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,1,1,0,0,0,0,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,2,2,0,0,0,0,0,0,0,1,0,0],[0,0,2,2,0,0,1,1,0,0,0,0,1,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}},320:function(e,t){"use strict";t.Z=class{constructor(e,t,n,i,s,r){this.type=e,this.health=t,this.attack=n,this.defense=i,this.range=s,this.move=r,this.alive=!0,this.items=[],this.pos=[]}setAlive(e){this.alive=e}setPiece(e){this.pos=e}move(e){this.pos=e}giveItem(e){this.items.push(e)}isAlive(){return this.alive}takeDamage(e){this.health=this.health-(e-this.defense),(0===this.health||this.health<0)&&this.setAlive(!1)}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){"use strict";var e=n.p+"d034f4a2c47c3c3068620d55db618d75.png",t=n.p+"0292f15a5491340be2c96175987a8688.png",i=n.p+"333aade2b420735d47a87dd3d53a9a5b.png",s=n.p+"2b352f91ad3be142bfce4bea52b5f365.png",r=n.p+"2915e1ae45c1d31aac13e7b062bcfc0a.png",l=n.p+"0584e2e99122dcec4480a418401ea098.png",o=n.p+"3e2992512f995a18b91e67ed21ef4001.png",d=n.p+"7c1edc51cc1dd9e0de4e2ae4c6c1db63.png",a=n.p+"73e221d0bb35c16a29944c37655556a2.png",u=n(320);document.querySelector(".tCount"),document.querySelector(".name");n(137);class h extends u.Z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("rifleman",10,5,1,3,3),this.name=e,this.owner=t}}var c=h;class m extends u.Z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("sniper",10,5,0,5,3),this.name=e,this.owner=t}}var y=m,g=n(374),p=n.n(g),v=class{constructor(n){if(this.board,this.stage=n,1===this.stage){let n=new class{constructor(e){this.type=e,this.playerUnits=[]}assignUnits(e){this.playerUnits.concat(e)}}("user"),h=[new c("Bob",n),new c("Joe",n),new y("Lex",n),new(p())("Steve",n)],m=[new c("Ben"),new c("Ryan"),new y("Dakota"),new(p())("Gunther")];this.board=new class{constructor(e,t,n){var i,s,r;i=this,r=e=>{let{keyCode:t}=e,n=this.currentMoveCount;if(37===t?this.isValidMove(-1,0)&&(this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1],0),this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1]-1,this.unitTurn),this.unitTurn.pos[1]--,this.currentMoveCount--):39===t?this.isValidMove(1,0)&&(this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1],0),this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1]+1,this.unitTurn),this.unitTurn.pos[1]++,this.currentMoveCount--):38===t?this.isValidMove(0,-1)&&(this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1],0),this.updateGrid(this.unitTurn.pos[0]-1,this.unitTurn.pos[1],this.unitTurn),this.unitTurn.pos[0]--,this.currentMoveCount--):40===t&&this.isValidMove(0,1)&&(this.updateGrid(this.unitTurn.pos[0],this.unitTurn.pos[1],0),this.updateGrid(this.unitTurn.pos[0]+1,this.unitTurn.pos[1],this.unitTurn),this.unitTurn.pos[0]++,this.currentMoveCount--),document.getElementById("moveCounter").textContent=`Moves Left: ${this.currentMoveCount}`,this.currentMoveCount<n){let e=this.unitTurn.name;document.getElementById(e).style.animation="none"}0!==this.currentMoveCount||document.removeEventListener("keydown",this.moveunit)},(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="moveunit"))in i?Object.defineProperty(i,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[s]=r,this.death=!1,this.moved=!1,this.startingPos=[],this.grid=e,this.units=t,this.enemies=n,this.characterKey={},this.allyNames=[];for(let e=0;e<this.units.length;e++)this.allyNames.push(this.units[e].name);this.enemyNames=[];for(let e=0;e<this.enemies.length;e++)this.enemyNames.push(this.enemies[e].name);this.unitOrder=this.setTurnOrder();for(let e=0;e<this.unitOrder.length;e++)this.characterKey[this.unitOrder[e].name]=this.unitOrder[e];this.currentTurn=0,this.unitTurn=this.unitOrder[this.currentTurn%this.unitOrder.length],this.unitGrid=new Array(10);for(let e=0;e<this.unitGrid.length;e++)this.unitGrid[e]=new Array(10);for(let e=0;e<this.unitGrid.length;e++)for(let t=0;t<this.unitGrid[e].length;t++)this.unitGrid[e][t]=0;this.battlefield=this.drawBattlefield(),this.cellSize=67,this.padding=2,this.setPos(),this.tiles=[],this.fillTiles(),this.unitImages=[],this.generateUnitImages(),this.generateHTMLsquares(),this.generateHTMLunits(),this.currentMoveCount=this.unitTurn.move}setCurrentMoveCount(){this.currentMoveCount=this.unitTurn.move}attack(e){let t=this.characterKey[e];console.log("before damge"),this.inRange(t)&&(t.takeDamage(this.unitTurn.attack),t.isAlive()||this.removeUnit(t))}inRange(e){let t=this.unitTurn.range,n=e.pos[0]-this.unitTurn.pos[0],i=e.pos[1]-this.unitTurn.pos[1];for(;0!==n;)n>0?(n--,t--):n<0&&(n++,t--);for(;0!==i;)i>0?(i--,t--):i<0&&(i++,t--);return!(t<0)}findClickedUnit(e){for(let t=0;t<this.unitOrder.length;t++)if(this.unitOrder[t].name===e){let e,n;return e=null===this.unitOrder[t].owner?"Player 2":"Player 1",n="atGunner"===this.unitOrder[t].type?"RPG":this.unitOrder[t].type,[this.unitOrder[t].health,this.unitOrder[t].attack,this.unitOrder[t].defense,this.unitOrder[t].name,n,e,this.unitOrder[t].move,this.unitOrder[t].range]}}savePositions(){for(let e=0;e<this.unitGrid.length;e++)for(let t=0;t<this.unitGrid[e].length;t++)if(this.unitGrid[e][t]instanceof u.Z){let n=document.getElementById(`${this.unitGrid[e][t].name}`);n.style.position="absolute",n.style.top=69*e+"px",n.style.left=69*t+"px"}}generateUnitImages(){let e=document.createElement("img");e.src=s,e.id="rifle",document.body.appendChild(e),e.style.display="none",this.unitImages.push(e);let t=document.createElement("img");t.src=d,t.id="sniper",document.body.appendChild(t),t.style.display="none",this.unitImages.push(t);let n=document.createElement("img");n.src=l,n.id="launcher",document.body.appendChild(n),n.style.display="none",this.unitImages.push(n);let i=document.createElement("img");i.src=r,i.id="rifle2",document.body.appendChild(i),i.style.display="none",this.unitImages.push(i);let u=document.createElement("img");u.src=a,u.id="sniper",document.body.appendChild(u),u.style.display="none",this.unitImages.push(u);let h=document.createElement("img");h.src=o,h.id="launcher",document.body.appendChild(h),h.style.display="none",this.unitImages.push(h)}fillTiles(){let n=new Image;n.src=e,this.tiles.push(n);let s=new Image;s.src=t,this.tiles.push(s);let r=new Image;r.src=i,this.tiles.push(r)}setPos(){for(let e=0;e<this.units.length;e++)this.units[e].setPiece([0,e+2]),this.unitGrid[0][e+2]=this.units[e];for(let e=0;e<this.enemies.length;e++)this.enemies[e].setPiece([this.unitGrid.length-2,e+4]),this.unitGrid[this.unitGrid.length-2][e+4]=this.enemies[e]}isValidMove(e,t){return(0===this.grid[this.unitTurn.pos[0]+t][this.unitTurn.pos[1]+e]||1===this.grid[this.unitTurn.pos[0]+t][this.unitTurn.pos[1]+e])&&0===this.unitGrid[this.unitTurn.pos[0]+t][this.unitTurn.pos[1]+e]}updateGrid(e,t,n){this.unitGrid[e][t]=n}getCenter(e,t){return{x:window.innerWidth/2-e/2+"px",y:window.innerHeight/2-t/2+"px"}}drawBattlefield(){return this.canvas=document.getElementById("game"),this.context=this.canvas.getContext("2d"),this.canvas.style.background="#949494",this.canvas.style.zIndex=11,this.context}generateHTMLsquares(){let e=0;for(let t=0;t<this.grid.length;t++)for(let n=0;n<this.grid[t].length;n++){let i=document.createElement("div");i.id=`${e}`,i.className="square",i.style.position="absolute",i.style.top=69*t+"px",i.style.left=69*n+"px",i.style.width="69px",i.style.height="69px",i.style.zIndex=100,document.getElementById("squares").appendChild(i),e++}}generateHTMLunits(){for(let e=0;e<this.unitGrid.length;e++)for(let t=0;t<this.unitGrid[e].length;t++)if(this.unitGrid[e][t]instanceof u.Z){let n=document.createElement("div");n.id=`${this.unitGrid[e][t].name}`,n.className="unit",n.style.position="absolute",n.style.top=69*e+"px",n.style.left=69*t+"px",n.style.width="69px",n.style.height="69px",n.style.zIndex=101,document.getElementById("squares").appendChild(n)}}render(){this.cellSize,this.padding,this.grid[0].length,this.padding,this.cellSize,this.padding,this.grid.length,this.padding;for(let e=0;e<this.grid.length;e++)for(let t=0;t<this.grid[e].length;t++){const n=this.grid[e][t];let i,s,r,l,o,d=0,a=0;0===n?(i=this.tiles[0],d=144,a=144):1===n?(i=this.tiles[1],d=144,a=144):3===n&&(i=this.tiles[2],d=1,a=0),this.battlefield.drawImage(i,d,a,30,30,t*(this.cellSize+this.padding),e*(this.cellSize+this.padding),this.cellSize,this.cellSize),this.unitGrid[e][t]instanceof u.Z&&(s=this.unitGrid[e][t].pos[1],r=this.unitGrid[e][t].pos[0],"rifleman"===this.unitGrid[e][t].type?(l=this.unitImages[0],o="rifle"):"sniper"===this.unitGrid[e][t].type?(l=this.unitImages[1],o="sniper"):"atGunner"===this.unitGrid[e][t].type&&(l=this.unitImages[2],o="launcher"),null===this.unitGrid[e][t].owner?("rifle"===o?l=this.unitImages[3]:"sniper"===o?l=this.unitImages[4]:"launcher"===o&&(l=this.unitImages[5]),this.battlefield.drawImage(l,8,8,48,48,t*(this.cellSize+this.padding),e*(this.cellSize+this.padding),this.cellSize,this.cellSize)):this.battlefield.drawImage(l,8,8,48,48,t*(this.cellSize+this.padding),e*(this.cellSize+this.padding),this.cellSize,this.cellSize))}}renderOptions(){document.getElementById("");let e=document.createElement("button"),t=document.createElement("button"),n=document.createElement("button"),i=document.createElement("button");e.class="move",t.class="attack",n.class="items",i.class="defend",e.style.display="block"}draw(e){let t=document.createElement("canvas");return t.id=e,t.width,t.height,t.getContext("2d"),document.body.appendChild(t),"moveOptions"===e&&this.renderOptions(),this.context}drawSquare(e,t,n,i,s){this.battlefieldContext.lineWidth=1,this.battlefieldContext.fillStyle=s,this.battlefieldContext.fillRect(e,t,n,i),this.battlefieldContext.strokeRect(e,t,n,i)}drawGrid(){let e=0,t=0,n=this.squareSize,i=this.squareSize;for(let s=0;s<this.grid.length;s++){for(let r=0;r<this.grid.length;r++)0===this.grid[s][r]?this.drawSquare(e,t,n,i,"#d3d3d2"):this.drawSquare(e,t,n,i,"#111"),e+=n;t+=i,e=0}}enemyAction(){}nextTurn(){let e=this.unitTurn.name;document.getElementById(e).style.animation="none",this.currentTurn++,document.getElementById("tCount").textContent=this.currentTurn+1,!0===this.death?this.unitTurn=this.unitOrder[this.currentTurn%(this.unitOrder.length+1)]:this.unitTurn=this.unitOrder[this.currentTurn%this.unitOrder.length],document.getElementById("name").textContent=`${this.unitTurn.name}`,this.death=!1,null===this.unitTurn.type&&this.enemyAction(),this.gameEnd(),this.displayStatus(this.unitTurn.name),null!==this.unitTurn.owner?document.getElementById("player-header").innerText="Player 1's Turn":document.getElementById("player-header").innerText="Player 2's Turn";let t=this.unitTurn.name;document.getElementById(t).style.animation="flash 3.5s infinite ease-in"}gameEnd(){if(this.won()){document.getElementById("player-header").style.display="none";let e=document.getElementById("squares");for(;e.firstChild;)e.removeChild(e.lastChild);return document.getElementById("victory").style.display="block",document.getElementById("winner").innerHTML="Player 1 Wins!",!0}if(this.lost()){document.getElementById("player-header").style.display="none";let e=document.getElementById("squares");for(;e.firstChild;)e.removeChild(e.lastChild);return document.getElementById("victory").style.display="block",document.getElementById("winner").innerHTML="Player 2 Wins!",!0}return!1}displayStatus(e){let t=this.findClickedUnit(e);document.getElementById("unitInfo").innerHTML=`\n    Name: ${t[3]}\n\n    <br>\n    Type: ${t[4]}\n\n    <br>\n    Alliance: ${t[5]}\n    <br>\n    <br>\n    HP: ${t[0]}\n\n    <br>\n    ATK: ${t[1]}  DEF: ${t[2]}\n\n    <br>\n    Move: ${t[6]}  Range: ${t[7]}\n\n    <br>`}removeUnit(e){this.death=!0;let t=[];for(let n=0;n<this.unitOrder.length;n++)this.unitOrder[n].name!==e.name&&t.push(this.unitOrder[n]);this.unitOrder=t;let n=[],i=[];for(let t=0;t<this.enemies.length;t++)this.enemies[t].name!==e.name&&n.push(this.enemies[t]);this.enemies=n;for(let t=0;t<this.units.length;t++)this.units[t].name!==e.name&&i.push(this.units[t]);this.units=i;let s=e.pos[0],r=e.pos[1];this.unitGrid[s][r]=0,this.gameEnd(),this.savePositions(),this.setCurrentMoveCount(),document.getElementById("move").style.display="block";let l=document.getElementsByClassName("moveB");for(let e=0;e<l.length;e++)l[e].style.display="block"}moveUnit(e){let t=e[0],n=e[1],i=this.unitTurn.pos,s=[i[0]+t,i[1]+n];return!!this.validMove(s)&&(this.unitTurn.move(s),null!=this.unitTurn.owner&&(this.grid[s[0]][s[1]]=this.unitTurn),!0)}validMove(e){let t=e[0],n=e[1];return!(t>9||t<0||n>9||n<0)&&1===this.grid[t][n]&&0===this.grid[t][n]}won(){return 15===this.currentTurn}lost(){return 0===this.units.length}setTurnOrder(){let e=[],t=0,n=0;for(let i=0;i<this.units.length+this.enemies.length;i++)i%2==0?(e.push(this.units[t]),t++):(e.push(this.enemies[n]),n++);return console.log(e),e}shuffleArray(e){let t=e.length,n=t;for(;t>=0;){n=Math.floor(Math.random()*(t+1));let i=e[t];e[t]=e[n],e[n]=i,t--}return e}renderStatus(){}}(BATTLEFIELDS.levelOne,h,m,n),this.runGame(this.board)}else this.stage}runGame(e){e.battlefield,function t(){window.requestAnimationFrame(t),e.render()}()}};n.p,document.addEventListener("DOMContentLoaded",(e=>{let t;document.getElementById("return").addEventListener("click",(()=>{document.getElementById("name").textContent="Bob",document.getElementById("tCount").textContent=1,document.getElementById("victory").style.display="none",document.getElementById("view").style.display="none",document.getElementById("stage-select").style.display="none",document.getElementById("start-game").style.display="block",document.getElementById("title-screen").style.display=""})),document.getElementById("confirm-move").addEventListener("click",(()=>{t.board.savePositions(),document.removeEventListener("keydown",t.board.moveUnit),document.getElementById("moveCounter").style.display="none";let e=document.getElementsByClassName("moveB");for(let t=0;t<e.length;t++)e[t].style.display="block";n.style.display="none",document.getElementById("moveText").style.display="none"})),document.getElementById("cancel-move").addEventListener("click",(()=>{let e=t.board.unitTurn.pos,n=t.board.startingPos;t.board.updateGrid(e[0],e[1],0),t.board.updateGrid(n[0],n[1],t.board.unitTurn),t.board.unitTurn.pos=n,console.log(t.board.unitTurn.pos,"reset unit position"),t.board.setCurrentMoveCount();let i=t.board.unitTurn.name;document.getElementById(i).style.animation="flash 3.5s infinite ease-in",document.removeEventListener("keydown",t.board.moveUnit),document.getElementById("moveCounter").style.display="none";let s=document.getElementsByClassName("moveB");for(let e=0;e<s.length;e++)s[e].style.display="block";document.getElementById("moveText").style.display="none"})),document.getElementById("cancel-move").addEventListener("click",(()=>{})),document.getElementById("move").addEventListener("click",(()=>{let e=[...t.board.unitTurn.pos];t.board.startingPos=e,console.log(t.board.startingPos,"starting pos"),document.getElementById("left").style.display="none",document.getElementById("right").style.display="none",document.getElementById("moveText").style.display="block"})),document.getElementById("cancel-attack").addEventListener("click",(()=>{document.getElementById("attackText").style.display="none";let e=document.getElementsByClassName("moveB");for(let t=0;t<e.length;t++)e[t].style.display="block"})),document.getElementById("start-game").addEventListener("click",(()=>{document.getElementById("start-game").style.display="none",document.getElementById("stage-select").style.display="block"})),document.getElementById("standard").addEventListener("click",(()=>{t=new v(1),document.getElementById("player-header").style.display="flex",document.getElementById("title-screen").style.display="none",document.getElementById("view").style.display="block",t.board.displayStatus("Bob");let e=document.getElementsByClassName("unit"),n=t;for(let t=0;t<e.length;t++)e[t].addEventListener("mouseover",(e=>{n.board.displayStatus(e.target.id)}));let i=t.board.unitTurn.name;document.getElementById(i).style.animation="flash 3.5s infinite ease-in"})),document.getElementById("bridge").addEventListener("click",(()=>{t=new v(2),document.getElementById("title-screen").style.display="none",document.getElementById("view").style.display="block"})),document.getElementById("end").addEventListener("click",(()=>{t.board.savePositions(),t.board.nextTurn(),t.board.setCurrentMoveCount(),t.board.moved=!1;let e=document.getElementById("move");document.getElementById("attackText").style.display="none",e.style.display="block";let n=document.getElementsByClassName("moveB");for(let e=0;e<n.length;e++)n[e].style.display="block";document.getElementById("moveText").style.display="none"}));let n=document.getElementById("move");n.addEventListener("click",(()=>{let e=document.getElementsByClassName("moveB");for(let t=0;t<e.length;t++)e[t].style.display="none";let n=document.getElementById("moveCounter");n.style.display="block",n.textContent=`Moves Left: ${t.board.currentMoveCount}`,document.addEventListener("keydown",t.board.moveunit)}));let i=document.getElementsByClassName("square");for(let e=0;e<i.length;e++)i[e].addEventListener("mouseover",(e=>{console.log(e.target.id)}));document.getElementById("attack").addEventListener("click",(()=>{let e=document.getElementsByClassName("moveB");for(let t=0;t<e.length;t++)e[t].style.display="none";document.getElementById("attackText").style.display="block";let n=t.board.unitTurn.owner,i=document.getElementsByClassName("unit");for(let s=0;s<i.length;s++)i[s],n?i[s].addEventListener("click",(n=>{if(console.log("ally attack"),t.board.enemyNames.includes(n.target.id)&&null!==t.board.unitTurn.owner){t.board.attack(n.target.id),t.board.savePositions(),t.board.nextTurn(),t.board.setCurrentMoveCount(),document.getElementById("move").style.display="block",document.getElementById("attackText").style.display="none";for(let t=0;t<e.length;t++)e[t].style.display="block"}}),{once:!0}):i[s].addEventListener("click",(n=>{if(console.log("enemy attack"),console.log(n.target.id),t.board.allyNames.includes(n.target.id)&&null===t.board.unitTurn.owner){console.log("check"),t.board.attack(n.target.id),t.board.savePositions(),t.board.nextTurn(),t.board.setCurrentMoveCount(),document.getElementById("move").style.display="block",document.getElementById("attackText").style.display="none";for(let t=0;t<e.length;t++)e[t].style.display="block"}}),{once:!0})}))}))}()}();
//# sourceMappingURL=main.js.map